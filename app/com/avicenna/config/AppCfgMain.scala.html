@import com.avicenna.config.AppCfgMgr.AppCfgGrpDto
@import com.avicenna.security.SecUserDto
@import com.avicenna.template.TmplDto
@import com.avicenna.template.html.TmplMain
@import com.avicenna.config.AppCfgNav._
@import views.html.helper._

@import com.avicenna.config.AppCfgNav
@(group : AppCfgGrpDto, tmpl: TmplDto, user: SecUserDto)

@TmplMain(tmpl, user) {

    <div class="row">

        <div class="@tmpl.getGrid(3)">

            <div class="card">

                <div class="card-title">@Messages("config.content.grplist.cardtitle")</div>

                <hr/>

                <div class="card-body">

                    <ul class="list-style-none">

                    @for(g <- group.getGroupNames) {
                        <li>
                        @if(g==group.getName) {
                            <a href="@com.avicenna.config.routes.AppCfgCtrl.config(g)" class="text-danger">@g</a>
                        } else {
                            <a href="@com.avicenna.config.routes.AppCfgCtrl.config(g)">@g</a>
                        }
                        </li>
                    }

                    </ul>

                </div>

            </div>

        </div>

        <div class="@tmpl.getGrid(9)">

            <div class="card">

                <div class="card-title">@Messages("config.content.proplist.cardtitle")</div>

                <hr/>

                <div class="card-body">

                    <form id="frmProp" class="form-horizontal" method="post" action="@com.avicenna.config.routes.AppCfgCtrl.saveConfig(group.getName)">

                        @CSRF.formField

                        <table class="display nowrap table table-hover table-striped table-bordered dataTable" width="100%">

                            <thead>
                                <tr>
                                    <th width="30%">@Messages("config.content.th.key")</th>
                                    <th>@Messages("config.content.th.value")</th>
                                    <th>@Messages("config.content.th.desc")</th>
                                    <th width="100px">@Messages("config.content.th.delete")</th>
                                </tr>
                            </thead>

                            <tbody>

                            @for(prop <- group.getProperties) {

                                <tr>
                                    <td>@prop.getKey</td>
                                    <td>
                                        <input class="form-control default-case"  type="text" name="@tmpl.clean(prop.getKey)" value="@prop.getValue">
                                    </td>
                                    <td>@prop.getDesc</td>
                                    <td>
                                        @if(prop.isDeletable) {
                                            <div class="custom-control custom-checkbox">

                                                <input type="checkbox" name="@prop.getCleanKey" class="custom-control-input" id="@prop.getCleanKey">

                                            </div>
                                        }
                                    </td>
                                </tr>

                            }

                            </tbody>

                        </table>

                    </form>

                </div>

                <hr/>

                <div class="row">

                    <div class="@tmpl.getGrid(12) p-1 text-right">

                        @if(tmpl.getNavMgr.hasPermission(AppCfgNav.Permission.SYS_CFG_CLEAR_CACHE.name(), user)) {
                            <a href="@com.avicenna.config.routes.AppCfgCtrl.clearCache(group.getName)" class="btn btn-danger">
                                <i class="icon-refresh"></i>&nbsp;@Messages("config.button.clearcache")
                            </a>
                        }

                        @if(tmpl.getNavMgr.hasPermission(AppCfgNav.Permission.SYS_CFG_UPDATE_CONFIG.name(), user)) {
                            <button id="btnSave" class="btn btn-info m-l-5 m-r-10" type="button">
                                <i class="icon-drawar"></i>&nbsp;@Messages("config.button.save")
                            </button>
                        }

                    </div>

                </div>

            </div>

        </div>

    </div>
}