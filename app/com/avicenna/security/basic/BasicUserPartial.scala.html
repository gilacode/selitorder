@import com.avicenna.security.SecUserDto
@import com.avicenna.template.TmplDto
@import com.avicenna.security.basic.BasicNav
@import views.html.helper._

@(currentUser : SecUserDto, user : SecUserDto, tmpl: TmplDto, imageSize : String, td : Boolean, vertical: Boolean, updatable: Boolean)

<form action="@com.avicenna.security.basic.routes.BasicUserCtrl.updateProfile(user.getUsername)" enctype="multipart/form-data" method="post">

    @CSRF.formField

    @if(td) {

        <td width="@imageSize">
            @if(user.getPhotoUrl==null) {
                <img src="@routes.Assets.versioned("images/user.png")" class="img-circle img-thumbnail" width="@imageSize">
            } else {
                <img src="@user.getPhotoUrl" class="img-circle img-thumbnail" width="@imageSize">
            }
        </td>
        <td>@user.getUsername</td>
        <td>@user.getEmail</td>
        <td>@user.getDisplayName</td>
        <td>@user.getMobileNo</td>

    } else {

        @if(vertical) {

            <div class="row">

                <div class="form-group @tmpl.getGrid(1)">

                    @if(user.getPhotoUrl==null) {
                        <img src="@routes.Assets.versioned("images/user.png")" class="img-circle img-thumbnail" width="@imageSize">
                    } else {
                        <img src="@user.getPhotoUrl" class="img-circle img-thumbnail" width="@imageSize">
                    }

                </div>

                <div class="form-group @tmpl.getGrid(3)">

                    <label for="username">User Name</label>&nbsp;:&nbsp;
                    <p class="form-control-static">@user.getUsername</p>

                </div>

                <div class="form-group @tmpl.getGrid(3)">

                    <label for="email">Email</label>&nbsp;:&nbsp;
                    <p class="form-control-static">@user.getEmail</p>

                </div>

                <div class="form-group @tmpl.getGrid(5)">

                    <label for="displayName">Display Name</label>&nbsp;:&nbsp;
                    <p class="form-control-static">@user.getDisplayName</p>

                </div>

            </div>

        } else {
            <div class="row">

                <div class="@tmpl.getGrid(4)">

                    <div class="row">

                        <div class="form-group @tmpl.getGrid(12)">

                            @if(user.getPhotoUrl==null) {
                                <img src="@routes.Assets.versioned("images/user.png")" class="img-circle img-thumbnail" width="@imageSize">
                            } else {
                                <img src="@user.getPhotoUrl" class="img-circle img-thumbnail" width="@imageSize">
                            }

                        </div>

                    </div>

                </div>

                <div class="@tmpl.getGrid(8)">

                    <div class="row">

                        <div class="form-group @tmpl.getGrid(12)">

                            <label for="username">User Name</label>
                            <input type="text" class="form-control-disabled default-case" id="username" name="username" readonly="true" value="@user.getUsername">

                        </div>

                    </div>

                    @if(updatable && (tmpl.getNavMgr.hasPermission(BasicNav.Permission.SEC_USR_UPD_PROF.name(), currentUser) || currentUser.getUsername.equals(user.getUsername))) {

                        <div class="row">

                            <div class="form-group @tmpl.getGrid(12)">

                                <label for="email">Email</label>
                                <input type="text" class="form-control default-case" id="email" name="email" value="@user.getEmail">

                            </div>

                        </div>

                        <div class="row">

                            <div class="form-group @tmpl.getGrid(12)">

                                <label for="displayName">Display Name</label>
                                <input type="text" class="form-control default-case" id="displayName" name="displayName" value="@user.getDisplayName">

                            </div>

                        </div>

                        <div class="row">

                            <div class="form-group @tmpl.getGrid(12)">

                                <label for="mobileNo">Mobile No</label>
                                <input type="text" class="form-control default-case" id="mobileNo" name="mobileNo" value="@user.getMobileNo">

                            </div>

                        </div>

                        <div class="row">

                            <div class="form-group @tmpl.getGrid(12)">

                                <label for="photo">Upload Photo</label>
                                <input type="file" class="form-control" id="photo" name="photo" value="Update Photo">
                                <small class="form-text text-muted">Image will be resized automatically to 300px x 300px</small>

                            </div>

                        </div>

                        <div class="row">

                            <div class="form-group @tmpl.getGrid(12) text-center mt-1">

                                <button type="submit" class="btn btn-info">
                                    <i class="icon-drawar"></i>&nbsp;Update
                                </button>

                            </div>

                        </div>

                    } else {

                        <div class="row">

                            <div class="form-group @tmpl.getGrid(12)">

                                <label for="email">Email</label>
                                <input type="text" class="form-control-disabled default-case" id="email" name="email" readonly="true" value="@user.getEmail">

                            </div>

                        </div>

                        <div class="row">

                            <div class="form-group @tmpl.getGrid(12)">

                                <label for="displayName">Display Name</label>
                                <input type="text" class="form-control-disabled default-case" id="displayName" name="displayName" readonly="true" value="@user.getDisplayName">

                            </div>

                        </div>

                        <div class="row">

                            <div class="form-group @tmpl.getGrid(12)">

                                <label for="mobileNo">Mobile No</label>
                                <input type="text" class="form-control-disabled default-case" id="mobileNo" name="mobileNo" readonly="true" value="@user.getMobileNo">

                            </div>

                        </div>

                    }

                </div>

            </div>
        }
    }

</form>
