@import com.avicenna.security.SecUserDto
@import com.avicenna.template.TmplDto
@import views.html.helper._
@import com.avicenna.security.basic.BasicNav

@import com.avicenna.security.SecUserMdl.SecUserType
@(currentUser : SecUserDto, user : SecUserDto, tmpl: TmplDto)

@if(tmpl.getNavMgr.hasPermission(BasicNav.Permission.SEC_USR_MAKE_ADMIN.name(), currentUser)) {

    @if(user.getUserType.equals(SecUserType.USER)) {

        <form id="makeAdminForm" action="@com.avicenna.security.basic.routes.BasicUserCtrl.makeSuperAdmin(user.getUsername)" enctype="multipart/form-data" method="post">

            @CSRF.formField

            <div class="card">

                <div class="card-title">@Messages("profile.content.makeadmin.cardtitle")</div>

                <hr/>

                <div class="card-body">

                    <div class="row">

                        <div class="form-group @tmpl.getGrid(12)">

                            <p class="text-danger">Super admin will automatically be assigned all permissions!</p>

                        </div>

                    </div>

                    <div class="row">

                        <div class="form-group @tmpl.getGrid(12) text-center mt-1">

                            <button type="button" id="btnMakeAdmin" class="btn btn-danger">
                                <i class="icon-plane"></i>&nbsp;Upgrade
                            </button>

                        </div>

                    </div>

                </div>

            </div>

        </form>
    } else {

        <form id="downgradeAdminForm" action="@com.avicenna.security.basic.routes.BasicUserCtrl.downgradeSuperAdmin(user.getUsername)" enctype="multipart/form-data" method="post">

            @CSRF.formField

            <div class="card">

                <div class="card-title">@Messages("profile.content.downgradeadmin.cardtitle")</div>

                <hr/>

                <div class="card-body">

                    <div class="row">

                        <div class="form-group @tmpl.getGrid(12)">

                            <p class="text-danger">Downgrading will reset back this user to their original permissions</p>

                        </div>

                    </div>

                    <div class="row">

                        <div class="form-group @tmpl.getGrid(12) text-center mt-1">

                            <button type="button" id="downgradeAdmin" class="btn btn-danger">
                                <i class="icon-user"></i>&nbsp;Downgrade
                            </button>

                        </div>

                    </div>

                </div>

            </div>

        </form>

    }
}